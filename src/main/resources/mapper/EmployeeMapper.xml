<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aqhi.mapper.EmployeeMapper">
	<resultMap id="BaseResultMap" type="com.aqhi.model.Employee">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<constructor>
			<idArg column="empl_id" javaType="java.lang.Long" jdbcType="BIGINT" />
			<arg column="nickname" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="password" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="salt" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="email" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="mobile_phone" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="photo" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="deptno" javaType="java.lang.Long" jdbcType="BIGINT" />
			<arg column="account_status" javaType="java.lang.Byte" jdbcType="TINYINT" />
		</constructor>
	</resultMap>


	<resultMap id="EmployeeMap" type="com.aqhi.model.Employee">
	
		<constructor>
			<idArg column="empl_id" javaType="java.lang.Long" jdbcType="BIGINT" />
			<arg column="nickname" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="password" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="salt" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="email" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="mobile_phone" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="photo" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="deptno" javaType="java.lang.Long" jdbcType="BIGINT" />
			<arg column="account_status" javaType="java.lang.Byte" jdbcType="TINYINT" />
		</constructor>
		<collection property="roles" column="empl_id" ofType="com.aqhi.model.URole"
			select="selectRoles">
		</collection>
		
	</resultMap>

	<select id="selectRoles" parameterType="java.lang.Long"
		resultType="com.aqhi.model.URole" resultMap="com.aqhi.mapper.URoleMapper.BaseResultMap">
		select r.id, r.name, r.type from u_user_role ur , u_role r
		where ur.uid =#{empl_id,jdbcType=BIGINT} 
		and r.id=ur.rid
	</select>


	<sql id="Base_Column_List">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		empl_id, nickname, password, salt, email, mobile_phone, photo, deptno,
		account_status
	</sql>
	<insert id="insertSelective" parameterType="com.aqhi.model.Employee">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into employee
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="empl_id != null">
				empl_id,
			</if>
			<if test="nickname != null">
				nickname,
			</if>
			<if test="password != null">
				password,
			</if>
			<if test="salt != null">
				salt,
			</if>
			<if test="email != null">
				email,
			</if>
			<if test="mobile_phone != null">
				mobile_phone,
			</if>
			<if test="photo != null">
				photo,
			</if>
			<if test="deptno != null">
				deptno,
			</if>
			<if test="account_status != null">
				account_status,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="empl_id != null">
				#{empl_id,jdbcType=BIGINT},
			</if>
			<if test="nickname != null">
				#{nickname,jdbcType=VARCHAR},
			</if>
			<if test="password != null">
				#{password,jdbcType=VARCHAR},
			</if>
			<if test="salt != null">
				#{salt,jdbcType=VARCHAR},
			</if>
			<if test="email != null">
				#{email,jdbcType=VARCHAR},
			</if>
			<if test="mobile_phone != null">
				#{mobile_phone,jdbcType=VARCHAR},
			</if>
			<if test="photo != null">
				#{photo,jdbcType=VARCHAR},
			</if>
			<if test="deptno != null">
				#{deptno,jdbcType=BIGINT},
			</if>
			<if test="account_status != null">
				#{account_status,jdbcType=TINYINT},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.aqhi.model.Employee">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update employee
		<set>
			<if test="nickname != null">
				nickname = #{nickname,jdbcType=VARCHAR},
			</if>
			<if test="password != null">
				password = #{password,jdbcType=VARCHAR},
			</if>
			<if test="salt != null">
				salt = #{salt,jdbcType=VARCHAR},
			</if>
			<if test="email != null">
				email = #{email,jdbcType=VARCHAR},
			</if>
			<if test="mobile_phone != null">
				mobile_phone = #{mobile_phone,jdbcType=VARCHAR},
			</if>
			<if test="photo != null">
				photo = #{photo,jdbcType=VARCHAR},
			</if>
			<if test="deptno != null">
				deptno = #{deptno,jdbcType=BIGINT},
			</if>
			<if test="account_status != null">
				account_status = #{account_status,jdbcType=TINYINT},
			</if>
		</set>
		where empl_id = #{empl_id,jdbcType=BIGINT}
	</update>
</mapper>